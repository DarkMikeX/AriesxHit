{"ast":null,"code":"// ===================================\n// API.JS\n// Backend API Communication\n// ===================================\n\nimport { API_BASE_URL } from '../config/api-config';\nexport async function registerUser(userData) {\n  try {\n    const response = await fetch(`${API_BASE_URL}/auth/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-Fingerprint': userData.fingerprint\n      },\n      body: JSON.stringify({\n        username: userData.username,\n        email: userData.email,\n        telegram: userData.telegram,\n        fingerprint_hash: userData.fingerprint\n      })\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.message || 'Registration failed');\n    }\n    return {\n      success: true,\n      user: data.user || data.data\n    };\n  } catch (error) {\n    console.error('Registration error:', error);\n    return {\n      success: false,\n      message: error.message || 'Network error'\n    };\n  }\n}\nexport async function checkExistingRegistration(fingerprint) {\n  try {\n    const response = await fetch(`${API_BASE_URL}/auth/check`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-Fingerprint': fingerprint\n      },\n      body: JSON.stringify({\n        fingerprint_hash: fingerprint\n      })\n    });\n    const data = await response.json();\n    if (response.ok && data.exists) {\n      return {\n        exists: true,\n        user: data.user || data.data\n      };\n    }\n    return {\n      exists: false\n    };\n  } catch (error) {\n    console.error('Check registration error:', error);\n    return {\n      exists: false\n    };\n  }\n}\nexport async function getUserStatus(fingerprint) {\n  try {\n    const response = await fetch(`${API_BASE_URL}/auth/status`, {\n      method: 'GET',\n      headers: {\n        'X-Fingerprint': fingerprint\n      }\n    });\n    const data = await response.json();\n    if (response.ok) {\n      return {\n        success: true,\n        status: data.status,\n        user: data.user\n      };\n    }\n    return {\n      success: false\n    };\n  } catch (error) {\n    console.error('Get status error:', error);\n    return {\n      success: false\n    };\n  }\n}","map":{"version":3,"names":["API_BASE_URL","registerUser","userData","response","fetch","method","headers","fingerprint","body","JSON","stringify","username","email","telegram","fingerprint_hash","data","json","ok","Error","message","success","user","error","console","checkExistingRegistration","exists","getUserStatus","status"],"sources":["/workspace/fp/src/utils/api.js"],"sourcesContent":["// ===================================\n// API.JS\n// Backend API Communication\n// ===================================\n\nimport { API_BASE_URL } from '../config/api-config';\n\nexport async function registerUser(userData) {\n  try {\n    const response = await fetch(`${API_BASE_URL}/auth/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-Fingerprint': userData.fingerprint\n      },\n      body: JSON.stringify({\n        username: userData.username,\n        email: userData.email,\n        telegram: userData.telegram,\n        fingerprint_hash: userData.fingerprint\n      })\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      throw new Error(data.message || 'Registration failed');\n    }\n\n    return {\n      success: true,\n      user: data.user || data.data\n    };\n  } catch (error) {\n    console.error('Registration error:', error);\n    return {\n      success: false,\n      message: error.message || 'Network error'\n    };\n  }\n}\n\nexport async function checkExistingRegistration(fingerprint) {\n  try {\n    const response = await fetch(`${API_BASE_URL}/auth/check`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-Fingerprint': fingerprint\n      },\n      body: JSON.stringify({\n        fingerprint_hash: fingerprint\n      })\n    });\n\n    const data = await response.json();\n\n    if (response.ok && data.exists) {\n      return {\n        exists: true,\n        user: data.user || data.data\n      };\n    }\n\n    return { exists: false };\n  } catch (error) {\n    console.error('Check registration error:', error);\n    return { exists: false };\n  }\n}\n\nexport async function getUserStatus(fingerprint) {\n  try {\n    const response = await fetch(`${API_BASE_URL}/auth/status`, {\n      method: 'GET',\n      headers: {\n        'X-Fingerprint': fingerprint\n      }\n    });\n\n    const data = await response.json();\n\n    if (response.ok) {\n      return {\n        success: true,\n        status: data.status,\n        user: data.user\n      };\n    }\n\n    return { success: false };\n  } catch (error) {\n    console.error('Get status error:', error);\n    return { success: false };\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}